\documentclass[12pt]{book}
\usepackage[T1]{fontenc}
\usepackage{times}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{url}
\usepackage{showidx}
\usepackage{imakeidx}
\usepackage{booktabs}
\usepackage{url}
\usepackage{etoolbox}  % for showidx

\usepackage{hyperref}  % should be last

% One space after periods
\frenchspacing

\hypersetup{pdfauthor={Rus Cox, Frans Kaashoek, Robbert Morris},
            pdftitle={xv6: a simple, Unix-like teaching operating system},}
  
\lstset{language=C,basicstyle=\small\ttfamily}
\lstset{morecomment=[is]{[[[}{]]]}}

\newcommand{\github}{https://github.com/kaashoek/xv6-risc-v/blob/riscv/}

\newcommand{\lineref}[2]{\href{\github/#1\#L#2}{#1:#2}}

\newcommand{\linerefs}[1]{{\small (#1)}}

\title{\textbf{xv6: a simple, Unix-like teaching operating system}}
\author{Rus Cox \and Frans Kaashoek \and Robbert Morris}

\makeindex

\begin{document}

\maketitle

\tableofcontents

\input{latex.out/acks}
\input{latex.out/unix}
\input{latex.out/first}
\input{latex.out/mem}
\input{latex.out/trap}
\input{latex.out/lock}
\input{latex.out/sched}
%\input{latex.out/fs}
\input{latex.out/sum}

{
% The following prevents latex from splitting a bibliography entry with a page
% break
\interlinepenalty=10000
% Since we're using natbib in numbers mode, we don't need plainnat,
% which exists to feed authors and years back in to natbib.  As a
% result, it complains about entries without years, which we don't
% care about.
%\bibliographystyle{plainnat}
\bibliographystyle{plain}
\bibliography{book}
}

\printindex

\end{document}
